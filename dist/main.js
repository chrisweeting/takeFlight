/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/styles/index.css":
/*!******************************!*\
  !*** ./src/styles/index.css ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _styles_index_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./styles/index.css */ "./src/styles/index.css");

var canvas = document.getElementById("flyCanvas");
var ctx = canvas.getContext("2d");
var rightPressed = false;
var leftPressed = false;
var turnX = 0;
var y = 0;
var rotationInit = 0;
var rotation = 0;
var counter = 0;
var cactiColors = ["#076d07", "#2e7a2f", "#a1d6a2", "#5ef75e"];
var cacti = [{
  x: -100,
  y: -100,
  width: 20,
  height: 100,
  color: "#076d07",
  hInitial: 0,
  yOrd: 0
}, {
  x: -40,
  y: -30,
  width: 20,
  height: 30,
  color: "#076d07",
  hInitial: 0,
  yOrd: 0
}, {
  x: 30,
  y: -40,
  width: 30,
  height: 40,
  color: "#2e7a2f",
  hInitial: 0,
  yOrd: 0
}];
var cloud1 = {
  sec1: 100,
  sec2: 130,
  sec3: 80
};
var cloud2 = {
  sec1: -130,
  sec2: -100,
  sec3: -80
};
ctx.translate(640, 360);

var keyDownHandler = function keyDownHandler(e) {
  if (e.key == "Right" || e.key == "ArrowRight") {
    rightPressed = true;
  } else if (e.key == "Left" || e.key == "ArrowLeft") {
    leftPressed = true;
  }
};

var keyUpHandler = function keyUpHandler(e) {
  if (e.key == "Right" || e.key == "ArrowRight") {
    rightPressed = false;
  } else if (e.key == "Left" || e.key == "ArrowLeft") {
    leftPressed = false;
  }
};

document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);

var drawHorizon = function drawHorizon() {
  ctx.beginPath();
  ctx.rect(-1000, y, 2000, 1500);
  ctx.fillStyle = "#e8e2a4";
  ctx.fill();
  ctx.closePath();
};

var drawRotation = function drawRotation() {
  ctx.font = "16px Arial";
  ctx.fillStyle = "#0095DD";
  ctx.fillText("Rotation: " + rotation, 1, 1);
};

var rotateCam = function rotateCam(num) {
  if (num < 100 && num > 0) {
    return ctx.rotate(Math.PI / 180 * 0.05);
  } else if (num > -100 && num < 0) {
    return ctx.rotate(Math.PI / 180 * -0.05);
  }
};

var drawBird = function drawBird() {
  ctx.save();
  ctx.translate(0, 150);
  ctx.rotate(Math.PI / 180 * -(rotation * 0.5 / 4));
  ctx.beginPath();
  ctx.rect(-60, -10, 120, 20);
  ctx.fillStyle = "blue";
  ctx.fill();
  ctx.closePath();
  ctx.restore();
};

var drawCactus = function drawCactus(x, y, w, h, color) {
  ctx.save(); // const place = -30 + x;
  // const width = 20 + w;
  // const height = 60 + h;
  // const growingX = place + gX;
  // const growingY =

  ctx.beginPath();
  ctx.rect(x, y, w, h);
  ctx.fillStyle = color;
  ctx.fill();
  ctx.closePath();
  ctx.restore();
};

var spawnCacti = function spawnCacti() {
  var x = Math.ceil(Math.random() * 640) * (Math.round(Math.random()) ? 1 : -1);
  var color = cactiColors[Math.floor(Math.random() * cactiColors.length)];
  cacti.unshift({
    x: x,
    y: -100,
    width: 20,
    height: 100,
    color: color,
    hInitial: 0,
    yOrd: 0
  });
};

var drawClouds = function drawClouds() {
  ctx.beginPath();
  ctx.arc(cloud1.sec1, -200, 50, 0, 2 * Math.PI);
  ctx.arc(cloud1.sec2, -170, 40, 0, 2 * Math.PI);
  ctx.arc(cloud1.sec3, -150, 30, 0, 2 * Math.PI);
  ctx.fillStyle = "#add6d8";
  ctx.fill();
  ctx.beginPath();
  ctx.arc(cloud2.sec1, -70, 40, 0, 2 * Math.PI);
  ctx.arc(cloud2.sec2, -100, 40, 0, 2 * Math.PI);
  ctx.arc(cloud2.sec3, -80, 50, 0, 2 * Math.PI);
  ctx.fillStyle = "#add6d8";
  ctx.fill();
};

var moveClouds = function moveClouds(num) {
  for (var section in cloud1) {
    cloud1[section] += num;
  }

  for (var _section in cloud2) {
    cloud2[_section] += num;
  }
};

var filterCacti = function filterCacti() {
  cacti = cacti.filter(function (cactus) {
    return cactus.width < 65;
  });
};

var animate = function animate() {
  ctx.clearRect(-1000, -1000, 2000, 2000);
  filterCacti();
  drawHorizon();
  drawClouds();
  drawRotation();
  drawBird(); //cactus spawn frequency

  if (counter === 20) {
    spawnCacti();
    counter = 0;
  }

  cacti.forEach(function (cactus) {
    cactus.x += turnX;
    var h = cactus.height;

    if (cactus.hInitial < cactus.height) {
      cactus.hInitial += 1;
      h = cactus.hInitial;
      cactus.yOrd -= 1;
    } else {
      cactus.yOrd += 0.39;
      cactus.y += 0.39;
      cactus.width += cactus.width * 0.0014;
      cactus.height += cactus.height * 0.0014; // cactus.height *= 1.0014;

      cactus.hInitial = cactus.height;
    } //cactus removal animation and yOrd speed control


    if (cactus.width > 50) {
      cactus.yOrd += 1;
      cactus.height -= 1;
    } else if (cactus.width > 27) {
      cactus.yOrd += 1; // cactus.color = "black";
    } else if (cactus.width > 23) {
      cactus.yOrd += 0.5; // cactus.color = "red";
    }

    if (cactus.y > 0) {
      cactus.color = "red";
    } // cactus path change to account for perspective


    if (cactus.y > -90) {
      if (cactus.x > 100) {
        cactus.x += 0.55;
      } else if (cactus.x < -100) {
        cactus.x -= 0.55;
      } else if (cactus.x > 60) {
        cactus.x += 0.2;
      } else if (cactus.x < -60) {
        cactus.x -= 0.2;
      } else if (cactus.x > 80) {
        cactus.x += 0.4;
      } else if (cactus.x < -80) {
        cactus.x -= 0.4;
      } else if (cactus.x > 40) {
        cactus.x += 0.1;
      } else if (cactus.x < -40) {
        cactus.x -= 0.1;
      } else if (cactus.x > 20) {
        cactus.x += 0.05;
      } else if (cactus.x < -20) {
        cactus.x -= 0.05;
      }
    }

    drawCactus(cactus.x, cactus.yOrd, cactus.width, h, cactus.color);
  });

  if (leftPressed) {
    if (turnX <= 0) {
      turnX += 0.075;
    } else if (turnX > 0 && turnX < 1.7) {
      turnX += 0.035;
    }

    moveClouds(0.61); //change value to shift cloud x position  

    if (rotation < 100 && rotation >= 0) {
      rotation += 1;
      rotateCam(rotation);
    } else if (rotation < 0) {
      rotation += 1;
      ctx.rotate(Math.PI / 180 * 0.05);
    }
  } else if (rightPressed) {
    if (turnX >= 0) {
      turnX -= 0.055;
    } else if (turnX < 0 && turnX > -1.7) {
      turnX -= 0.35;
    }

    moveClouds(-0.61); //change value to shift cloud x position 

    if (rotation > -100 && rotation <= 0) {
      rotation -= 1;
      rotateCam(rotation);
    } else if (rotation > 0) {
      rotation -= 1;
      ctx.rotate(Math.PI / 180 * -0.05);
    }
  } else {
    if (rotation > 0) {
      rotation -= 1;
      ctx.rotate(Math.PI / 180 * -0.05);
    } else if (rotation < 0) {
      rotation += 1;
      ctx.rotate(Math.PI / 180 * 0.05);
    } else {
      turnX = 0;
    }
  }

  counter += 1;
};

setInterval(animate, 10); //on keydown the horizon rotates to a certain point
//on keyup the horizon returns to its initial state
//as the horizon shifts enemy elements/obstacles shift too
//they also add or decrease their x position depending on the key direction
//variable for time elapsed === high score
//high score saved and displayed
})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YWtlX2ZsaWdodC8uL3NyYy9zdHlsZXMvaW5kZXguY3NzIiwid2VicGFjazovL3Rha2VfZmxpZ2h0L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3Rha2VfZmxpZ2h0L3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vdGFrZV9mbGlnaHQvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiY2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImN0eCIsImdldENvbnRleHQiLCJyaWdodFByZXNzZWQiLCJsZWZ0UHJlc3NlZCIsInR1cm5YIiwieSIsInJvdGF0aW9uSW5pdCIsInJvdGF0aW9uIiwiY291bnRlciIsImNhY3RpQ29sb3JzIiwiY2FjdGkiLCJ4Iiwid2lkdGgiLCJoZWlnaHQiLCJjb2xvciIsImhJbml0aWFsIiwieU9yZCIsImNsb3VkMSIsInNlYzEiLCJzZWMyIiwic2VjMyIsImNsb3VkMiIsInRyYW5zbGF0ZSIsImtleURvd25IYW5kbGVyIiwiZSIsImtleSIsImtleVVwSGFuZGxlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmF3SG9yaXpvbiIsImJlZ2luUGF0aCIsInJlY3QiLCJmaWxsU3R5bGUiLCJmaWxsIiwiY2xvc2VQYXRoIiwiZHJhd1JvdGF0aW9uIiwiZm9udCIsImZpbGxUZXh0Iiwicm90YXRlQ2FtIiwibnVtIiwicm90YXRlIiwiTWF0aCIsIlBJIiwiZHJhd0JpcmQiLCJzYXZlIiwicmVzdG9yZSIsImRyYXdDYWN0dXMiLCJ3IiwiaCIsInNwYXduQ2FjdGkiLCJjZWlsIiwicmFuZG9tIiwicm91bmQiLCJmbG9vciIsImxlbmd0aCIsInVuc2hpZnQiLCJkcmF3Q2xvdWRzIiwiYXJjIiwibW92ZUNsb3VkcyIsInNlY3Rpb24iLCJmaWx0ZXJDYWN0aSIsImZpbHRlciIsImNhY3R1cyIsImFuaW1hdGUiLCJjbGVhclJlY3QiLCJmb3JFYWNoIiwic2V0SW50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QUksQ0FBWjtBQUNBUCxTQUFHLENBQUN1QyxNQUFKLENBQVlDLElBQUksQ0FBQ0MsRUFBTCxHQUFVLEdBQVgsR0FBa0IsSUFBN0I7QUFDRCxLQUhNLE1BR0E7QUFDTHJDLFdBQUssR0FBRyxDQUFSO0FBQ0Q7QUFDRjs7QUFDREksU0FBTyxJQUFJLENBQVg7QUFDRCxDQW5IRDs7QUFzSEF5RCxXQUFXLENBQUNILE9BQUQsRUFBVSxFQUFWLENBQVgsQyxDQUVJO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQSxnQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAnLi9zdHlsZXMvaW5kZXguY3NzJztcblxudmFyIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZmx5Q2FudmFzXCIpO1xudmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG52YXIgcmlnaHRQcmVzc2VkID0gZmFsc2U7XG52YXIgbGVmdFByZXNzZWQgPSBmYWxzZTtcbnZhciB0dXJuWCA9IDA7XG52YXIgeSA9IDA7XG52YXIgcm90YXRpb25Jbml0ID0gMDtcbnZhciByb3RhdGlvbiA9IDA7XG52YXIgY291bnRlciA9IDA7XG52YXIgY2FjdGlDb2xvcnMgPSBbXCIjMDc2ZDA3XCIsIFwiIzJlN2EyZlwiLCBcIiNhMWQ2YTJcIiwgXCIjNWVmNzVlXCJdO1xudmFyIGNhY3RpID0gW1xuICB7IHg6IC0xMDAsIHk6IC0xMDAsIHdpZHRoOiAyMCwgaGVpZ2h0OiAxMDAsIGNvbG9yOiBcIiMwNzZkMDdcIiwgaEluaXRpYWw6IDAsIHlPcmQ6IDAgfSxcbiAgeyB4OiAtNDAsIHk6IC0zMCwgd2lkdGg6IDIwLCBoZWlnaHQ6IDMwLCBjb2xvcjogXCIjMDc2ZDA3XCIsIGhJbml0aWFsOiAwLCB5T3JkOiAwIH0sXG4gIHsgeDogMzAsIHk6IC00MCwgd2lkdGg6IDMwLCBoZWlnaHQ6IDQwLCBjb2xvcjogXCIjMmU3YTJmXCIsIGhJbml0aWFsOiAwLCB5T3JkOiAwIH1cbl07XG52YXIgY2xvdWQxID0geyBzZWMxOiAxMDAsIHNlYzI6IDEzMCwgc2VjMzogODAgfTtcbnZhciBjbG91ZDIgPSB7IHNlYzE6IC0xMzAsIHNlYzI6IC0xMDAsIHNlYzM6IC04MCB9O1xuXG5jdHgudHJhbnNsYXRlKDY0MCwgMzYwKTtcblxuXG5cbmNvbnN0IGtleURvd25IYW5kbGVyID0gKGUpID0+IHtcbiAgaWYgKGUua2V5ID09IFwiUmlnaHRcIiB8fCBlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgIHJpZ2h0UHJlc3NlZCA9IHRydWU7XG4gIH1cbiAgZWxzZSBpZiAoZS5rZXkgPT0gXCJMZWZ0XCIgfHwgZS5rZXkgPT0gXCJBcnJvd0xlZnRcIikge1xuICAgIGxlZnRQcmVzc2VkID0gdHJ1ZTtcbiAgfVxufTtcblxuY29uc3Qga2V5VXBIYW5kbGVyID0gKGUpID0+IHtcbiAgaWYgKGUua2V5ID09IFwiUmlnaHRcIiB8fCBlLmtleSA9PSBcIkFycm93UmlnaHRcIikge1xuICAgIHJpZ2h0UHJlc3NlZCA9IGZhbHNlO1xuICB9XG4gIGVsc2UgaWYgKGUua2V5ID09IFwiTGVmdFwiIHx8IGUua2V5ID09IFwiQXJyb3dMZWZ0XCIpIHtcbiAgICBsZWZ0UHJlc3NlZCA9IGZhbHNlO1xuICB9XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBrZXlEb3duSGFuZGxlciwgZmFsc2UpO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGtleVVwSGFuZGxlciwgZmFsc2UpO1xuXG5jb25zdCBkcmF3SG9yaXpvbiA9ICgpID0+IHtcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgucmVjdCgtMTAwMCwgeSwgMjAwMCwgMTUwMCk7XG5cbiAgY3R4LmZpbGxTdHlsZSA9IFwiI2U4ZTJhNFwiO1xuICBjdHguZmlsbCgpO1xuICBjdHguY2xvc2VQYXRoKCk7XG59O1xuXG5jb25zdCBkcmF3Um90YXRpb24gPSAoKSA9PiB7XG4gIGN0eC5mb250ID0gXCIxNnB4IEFyaWFsXCI7XG4gIGN0eC5maWxsU3R5bGUgPSBcIiMwMDk1RERcIjtcbiAgY3R4LmZpbGxUZXh0KFwiUm90YXRpb246IFwiICsgcm90YXRpb24sIDEsIDEpO1xufTtcblxuY29uc3Qgcm90YXRlQ2FtID0gKG51bSkgPT4ge1xuICBpZiAobnVtIDwgMTAwICYmIG51bSA+IDApIHtcbiAgICByZXR1cm4gY3R4LnJvdGF0ZSgoTWF0aC5QSSAvIDE4MCkgKiAwLjA1KTtcbiAgfSBlbHNlIGlmIChudW0gPiAtMTAwICYmIG51bSA8IDApIHtcbiAgICByZXR1cm4gY3R4LnJvdGF0ZSgoTWF0aC5QSSAvIDE4MCkgKiAtMC4wNSk7XG4gIH1cbn07XG5cbmNvbnN0IGRyYXdCaXJkID0gKCkgPT4ge1xuICBjdHguc2F2ZSgpO1xuICBcbiAgY3R4LnRyYW5zbGF0ZSgwLCAxNTApO1xuICBjdHgucm90YXRlKChNYXRoLlBJIC8gMTgwKSAqIC0oKHJvdGF0aW9uICogMC41ICkgLyA0KSk7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4LnJlY3QoLTYwLCAtMTAsIDEyMCwgMjApO1xuICBjdHguZmlsbFN0eWxlID0gXCJibHVlXCI7XG4gIGN0eC5maWxsKCk7XG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgXG4gIGN0eC5yZXN0b3JlKCk7XG59O1xuXG5jb25zdCBkcmF3Q2FjdHVzID0gKHgsIHksIHcsIGgsIGNvbG9yKSA9PiB7XG4gIGN0eC5zYXZlKCk7XG4gIC8vIGNvbnN0IHBsYWNlID0gLTMwICsgeDtcbiAgLy8gY29uc3Qgd2lkdGggPSAyMCArIHc7XG4gIC8vIGNvbnN0IGhlaWdodCA9IDYwICsgaDtcbiAgLy8gY29uc3QgZ3Jvd2luZ1ggPSBwbGFjZSArIGdYO1xuICAvLyBjb25zdCBncm93aW5nWSA9XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4LnJlY3QoeCwgeSwgdywgaCk7XG4gIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgY3R4LmZpbGwoKTtcbiAgY3R4LmNsb3NlUGF0aCgpO1xuICBjdHgucmVzdG9yZSgpO1xufTtcblxuY29uc3Qgc3Bhd25DYWN0aSA9ICgpID0+IHtcbiAgbGV0IHggPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDY0MCkgKiAoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpKSA/IDEgOiAtMSk7XG4gIGxldCBjb2xvciA9IGNhY3RpQ29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNhY3RpQ29sb3JzLmxlbmd0aCldO1xuICBjYWN0aS51bnNoaWZ0KHtcbiAgICB4OiB4LFxuICAgIHk6IC0xMDAsXG4gICAgd2lkdGg6IDIwLFxuICAgIGhlaWdodDogMTAwLFxuICAgIGNvbG9yOiBjb2xvcixcbiAgICBoSW5pdGlhbDogMCxcbiAgICB5T3JkOiAwXG4gIH0pO1xufTtcblxuY29uc3QgZHJhd0Nsb3VkcyA9ICgpID0+IHtcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHguYXJjKGNsb3VkMS5zZWMxLCAtMjAwLCA1MCwgMCwgMiAqIE1hdGguUEkpO1xuICBjdHguYXJjKGNsb3VkMS5zZWMyLCAtMTcwLCA0MCwgMCwgMiAqIE1hdGguUEkpO1xuICBjdHguYXJjKGNsb3VkMS5zZWMzLCAtMTUwLCAzMCwgMCwgMiAqIE1hdGguUEkpO1xuICBjdHguZmlsbFN0eWxlID0gXCIjYWRkNmQ4XCI7XG4gIGN0eC5maWxsKCk7XG5cbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHguYXJjKGNsb3VkMi5zZWMxLCAtNzAsIDQwLCAwLCAyICogTWF0aC5QSSk7XG4gIGN0eC5hcmMoY2xvdWQyLnNlYzIsIC0xMDAsIDQwLCAwLCAyICogTWF0aC5QSSk7XG4gIGN0eC5hcmMoY2xvdWQyLnNlYzMsIC04MCwgNTAsIDAsIDIgKiBNYXRoLlBJKTtcbiAgY3R4LmZpbGxTdHlsZSA9IFwiI2FkZDZkOFwiO1xuICBjdHguZmlsbCgpO1xufTtcblxuY29uc3QgbW92ZUNsb3VkcyA9IChudW0pID0+IHtcbiAgZm9yIChjb25zdCBzZWN0aW9uIGluIGNsb3VkMSkge1xuICAgIGNsb3VkMVtzZWN0aW9uXSArPSBudW07XG4gIH1cbiAgZm9yIChjb25zdCBzZWN0aW9uIGluIGNsb3VkMikge1xuICAgIGNsb3VkMltzZWN0aW9uXSArPSBudW07XG4gIH1cbn07XG5cbmNvbnN0IGZpbHRlckNhY3RpID0gKCkgPT4ge1xuICBjYWN0aSA9IGNhY3RpLmZpbHRlcihjYWN0dXMgPT4gKGNhY3R1cy53aWR0aCA8IDY1KSk7XG59O1xuXG5jb25zdCBhbmltYXRlID0gKCkgPT4ge1xuICBjdHguY2xlYXJSZWN0KC0xMDAwLCAtMTAwMCwgMjAwMCwgMjAwMCk7XG4gIGZpbHRlckNhY3RpKCk7XG4gIGRyYXdIb3Jpem9uKCk7XG4gIGRyYXdDbG91ZHMoKTtcbiAgZHJhd1JvdGF0aW9uKCk7XG4gIGRyYXdCaXJkKCk7XG5cbiAgLy9jYWN0dXMgc3Bhd24gZnJlcXVlbmN5XG4gIGlmIChjb3VudGVyID09PSAyMCkge1xuICAgIHNwYXduQ2FjdGkoKTtcbiAgICBjb3VudGVyID0gMDtcbiAgfVxuXG5cbiAgY2FjdGkuZm9yRWFjaChjYWN0dXMgPT4ge1xuICAgIGNhY3R1cy54ICs9IHR1cm5YO1xuICAgIGxldCBoID0gY2FjdHVzLmhlaWdodDtcbiAgICBpZiAoY2FjdHVzLmhJbml0aWFsIDwgY2FjdHVzLmhlaWdodCkge1xuICAgICAgY2FjdHVzLmhJbml0aWFsICs9IDE7XG4gICAgICBoID0gY2FjdHVzLmhJbml0aWFsO1xuICAgICAgY2FjdHVzLnlPcmQgLT0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FjdHVzLnlPcmQgKz0gMC4zOTtcbiAgICAgIGNhY3R1cy55ICs9IDAuMzk7XG4gICAgICBjYWN0dXMud2lkdGggKz0gY2FjdHVzLndpZHRoICogMC4wMDE0O1xuICAgICAgY2FjdHVzLmhlaWdodCArPSBjYWN0dXMuaGVpZ2h0ICogMC4wMDE0O1xuICAgICAgLy8gY2FjdHVzLmhlaWdodCAqPSAxLjAwMTQ7XG4gICAgICBjYWN0dXMuaEluaXRpYWwgPSBjYWN0dXMuaGVpZ2h0O1xuICAgIH1cblxuICAgIC8vY2FjdHVzIHJlbW92YWwgYW5pbWF0aW9uIGFuZCB5T3JkIHNwZWVkIGNvbnRyb2xcbiAgICBpZiAoY2FjdHVzLndpZHRoID4gNTApIHtcbiAgICAgIGNhY3R1cy55T3JkICs9IDE7XG4gICAgICBjYWN0dXMuaGVpZ2h0IC09IDE7XG4gICAgfSBlbHNlIGlmIChjYWN0dXMud2lkdGggPiAyNykge1xuICAgICAgY2FjdHVzLnlPcmQgKz0gMTtcbiAgICAgIC8vIGNhY3R1cy5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICB9IGVsc2UgaWYgKGNhY3R1cy53aWR0aCA+IDIzKSB7XG4gICAgICBjYWN0dXMueU9yZCArPSAwLjU7XG4gICAgICAvLyBjYWN0dXMuY29sb3IgPSBcInJlZFwiO1xuICAgIH1cblxuICAgIGlmIChjYWN0dXMueSA+IDApIHtcbiAgICAgIGNhY3R1cy5jb2xvciA9IFwicmVkXCI7XG4gICAgfVxuXG4gICAgLy8gY2FjdHVzIHBhdGggY2hhbmdlIHRvIGFjY291bnQgZm9yIHBlcnNwZWN0aXZlXG4gICAgaWYgKGNhY3R1cy55ID4gLTkwKSB7XG4gICAgICBpZiAoY2FjdHVzLnggPiAxMDApIHtcbiAgICAgICAgY2FjdHVzLnggKz0gMC41NTtcbiAgICAgIH0gZWxzZSBpZiAoY2FjdHVzLnggPCAtMTAwKSB7XG4gICAgICAgIGNhY3R1cy54IC09IDAuNTU7XG4gICAgICB9IGVsc2UgaWYgKGNhY3R1cy54ID4gNjApIHtcbiAgICAgICAgY2FjdHVzLnggKz0gMC4yO1xuICAgICAgfSBlbHNlIGlmIChjYWN0dXMueCA8IC02MCkge1xuICAgICAgICBjYWN0dXMueCAtPSAwLjI7XG4gICAgICB9IGVsc2UgaWYgKGNhY3R1cy54ID4gODApIHtcbiAgICAgICAgY2FjdHVzLnggKz0gMC40O1xuICAgICAgfSBlbHNlIGlmIChjYWN0dXMueCA8IC04MCkge1xuICAgICAgICBjYWN0dXMueCAtPSAwLjQ7XG4gICAgICB9IGVsc2UgaWYgKGNhY3R1cy54ID4gNDApIHtcbiAgICAgICAgY2FjdHVzLnggKz0gMC4xO1xuICAgICAgfSBlbHNlIGlmIChjYWN0dXMueCA8IC00MCkge1xuICAgICAgICBjYWN0dXMueCAtPSAwLjE7XG4gICAgICB9IGVsc2UgaWYgKGNhY3R1cy54ID4gMjApIHtcbiAgICAgICAgY2FjdHVzLnggKz0gMC4wNTtcbiAgICAgIH0gZWxzZSBpZiAoY2FjdHVzLnggPCAtMjApIHtcbiAgICAgICAgY2FjdHVzLnggLT0gMC4wNTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBkcmF3Q2FjdHVzKGNhY3R1cy54LCBjYWN0dXMueU9yZCwgY2FjdHVzLndpZHRoLCBoLCBjYWN0dXMuY29sb3IpO1xuICB9KTtcbiAgXG4gIGlmIChsZWZ0UHJlc3NlZCkge1xuICAgIGlmICh0dXJuWCA8PSAwKSAge1xuICAgICAgdHVyblggKz0gMC4wNzU7XG4gICAgfSBlbHNlIGlmICh0dXJuWCA+IDAgJiYgdHVyblggPCAxLjcpIHtcbiAgICAgIHR1cm5YICs9IDAuMDM1O1xuICAgIH1cbiAgICBtb3ZlQ2xvdWRzKDAuNjEpOyAvL2NoYW5nZSB2YWx1ZSB0byBzaGlmdCBjbG91ZCB4IHBvc2l0aW9uICBcbiAgICBpZiAocm90YXRpb24gPCAxMDAgJiYgcm90YXRpb24gPj0gMCkge1xuICAgICAgcm90YXRpb24gKz0gMTtcbiAgICAgIHJvdGF0ZUNhbShyb3RhdGlvbik7XG4gICAgfSBlbHNlIGlmIChyb3RhdGlvbiA8IDApIHtcbiAgICAgIHJvdGF0aW9uICs9IDE7XG4gICAgICBjdHgucm90YXRlKChNYXRoLlBJIC8gMTgwKSAqIDAuMDUpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChyaWdodFByZXNzZWQpIHtcbiAgICBpZiAodHVyblggPj0gMCkge1xuICAgICAgdHVyblggLT0gMC4wNTU7XG4gICAgfSBlbHNlIGlmICh0dXJuWCA8IDAgJiYgdHVyblggPiAtMS43KSB7XG4gICAgICB0dXJuWCAtPSAwLjM1O1xuICAgIH1cbiAgICBtb3ZlQ2xvdWRzKC0wLjYxKTsgLy9jaGFuZ2UgdmFsdWUgdG8gc2hpZnQgY2xvdWQgeCBwb3NpdGlvbiBcbiAgICBpZiAocm90YXRpb24gPiAtMTAwICYmIHJvdGF0aW9uIDw9IDApIHtcbiAgICAgIHJvdGF0aW9uIC09IDE7XG4gICAgICByb3RhdGVDYW0ocm90YXRpb24pO1xuICAgIH0gZWxzZSBpZiAocm90YXRpb24gPiAwKSB7XG4gICAgICByb3RhdGlvbiAtPSAxO1xuICAgICAgY3R4LnJvdGF0ZSgoTWF0aC5QSSAvIDE4MCkgKiAtMC4wNSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChyb3RhdGlvbiA+IDApIHtcbiAgICAgIHJvdGF0aW9uIC09IDE7XG4gICAgICBjdHgucm90YXRlKChNYXRoLlBJIC8gMTgwKSAqIC0wLjA1KTtcbiAgICB9IGVsc2UgaWYgKHJvdGF0aW9uIDwgMCkge1xuICAgICAgcm90YXRpb24gKz0gMTtcbiAgICAgIGN0eC5yb3RhdGUoKE1hdGguUEkgLyAxODApICogMC4wNSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR1cm5YID0gMDtcbiAgICB9XG4gIH1cbiAgY291bnRlciArPSAxO1xufTtcblxuXG5zZXRJbnRlcnZhbChhbmltYXRlLCAxMCk7XG5cbiAgICAvL29uIGtleWRvd24gdGhlIGhvcml6b24gcm90YXRlcyB0byBhIGNlcnRhaW4gcG9pbnRcbiAgICAvL29uIGtleXVwIHRoZSBob3Jpem9uIHJldHVybnMgdG8gaXRzIGluaXRpYWwgc3RhdGVcbiAgICAvL2FzIHRoZSBob3Jpem9uIHNoaWZ0cyBlbmVteSBlbGVtZW50cy9vYnN0YWNsZXMgc2hpZnQgdG9vXG4gICAgLy90aGV5IGFsc28gYWRkIG9yIGRlY3JlYXNlIHRoZWlyIHggcG9zaXRpb24gZGVwZW5kaW5nIG9uIHRoZSBrZXkgZGlyZWN0aW9uXG5cbiAgICAvL3ZhcmlhYmxlIGZvciB0aW1lIGVsYXBzZWQgPT09IGhpZ2ggc2NvcmVcbiAgICAvL2hpZ2ggc2NvcmUgc2F2ZWQgYW5kIGRpc3BsYXllZFxuXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=